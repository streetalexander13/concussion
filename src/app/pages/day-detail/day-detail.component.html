<section class="day-detail fade-in" *ngIf="session() as s">
  <header class="detail-header">
    <div class="date-badge">📅 {{ s.date }}</div>
    <h2>Your Recovery Day</h2>
  </header>

  <div class="card baseline-card">
    <div class="card-title">
      <span class="emoji">🧠</span>
      <h3>Baseline Symptoms</h3>
    </div>
    <div class="baseline-display">
      <div class="baseline-value">
        <span class="number">{{ s.baseline }}</span>
        <span class="max">/10</span>
      </div>
      <div class="baseline-meta">
        <span class="time">{{ s.baselineRecordedAt | date:'shortTime' }}</span>
      </div>
    </div>
  </div>

  <div class="card trend-card">
    <div class="card-title">
      <span class="emoji">📈</span>
      <h3>14-Day Baseline Trend</h3>
    </div>
    <p class="trend-subtitle">Lower values indicate improving symptoms</p>
    <div class="sparkline-container">
      <app-sparkline [values]="baselineValues()" [width]="600" [height]="80" [min]="0" [max]="10" />
    </div>
  </div>

  <div class="exercises-section">
    <h3 class="section-title">
      <span class="emoji">💪</span>
      Exercises Completed
    </h3>
    <div class="exercise-list">
      <div class="exercise-card card" *ngFor="let ex of s.exercises; let i = index"
           [style.animation-delay.ms]="i * 100">
        <div class="exercise-header">
          <div class="exercise-title">
            <span class="exercise-number">{{ i + 1 }}</span>
            <h4>{{ ex.config.title }}</h4>
          </div>
          <div class="exercise-status" [class.completed]="ex.result">
            <span *ngIf="ex.result" class="status-badge done">✓ Done</span>
            <span *ngIf="!ex.result" class="status-badge pending">⏳ Pending</span>
          </div>
        </div>
        
        <p class="exercise-desc">{{ ex.config.description }}</p>
        
        <div class="exercise-results" *ngIf="ex.result">
          <div class="result-item">
            <span class="result-label">Symptom Change</span>
            <span class="result-value" [class.worsened]="ex.result.worsened">
              <span *ngIf="!ex.result.worsened" class="emoji">😊</span>
              <span *ngIf="ex.result.worsened" class="emoji">😰</span>
              {{ ex.result.worsened ? 'Worsened +' + ex.result.severity : 'No change' }}
            </span>
          </div>
          
          <div class="advice-box" *ngIf="ex.adviceForNextTime">
            <span class="advice-icon">💡</span>
            <p class="advice-text">{{ ex.adviceForNextTime }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


